<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Lịch sử đơn hàng</title>
    <style>
        body { font-family: Inter, sans-serif; background: #f8f9fa; padding: 30px; }
        .order-card { background: #fff; border-radius: 8px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
        .order-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .order-items { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .order-items th, .order-items td { padding: 8px; border: 1px solid #ccc; text-align: center; }
        .order-items th { background: #eee; }
        .total { text-align: right; font-weight: bold; margin-top: 10px; }
        .status { padding: 4px 8px; border-radius: 4px; color: #fff; }
        .status-pending { background: #f39c12; }
        .status-completed { background: #27ae60; }
        .status-canceled { background: #c0392b; }
    </style>
</head>
<body>

<h2 style="text-align:center;">Lịch sử đơn hàng của bạn</h2>

<div th:each="order : ${orders}" class="order-card">
    <div class="order-header">
        <div>
            <strong>Mã đơn hàng:</strong> <span th:text="${order.id}"></span><br>
            <strong>Nhà hàng:</strong> <span th:text="${order.restaurant.title}"></span><br>
            <strong>Ngày đặt:</strong> <span th:text="${#temporals.format(order.createDate, 'dd/MM/yyyy HH:mm')}"></span>
        </div>
        <div>
            <strong>Trạng thái:</strong>
            <span th:switch="${order.status}">
                <span th:case="0" class="status status-pending">Đang xử lý</span>
                <span th:case="1" class="status status-completed">Hoàn thành</span>
                <span th:case="2" class="status status-canceled">Đã hủy</span>
                <span th:case="*">Không xác định</span>
            </span>
        </div>
    </div>

    <table class="order-items">
        <thead>
        <tr>
            <th>Tên món</th>
            <th>Số lượng</th>
            <th>Giá</th>
            <th>Tổng tiền</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${order.items}">
            <td th:text="${item.food.title}"></td>
            <td th:text="${item.quantity}"></td>
            <td th:text="${item.food.price}"></td>
            <td th:text="${order.totalPrice}"></td>

        </tr>
        </tbody>
    </table>

</div>

</body>
</html>
