<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ฤฦกn hรng nhร hรng</title>
  <th:block th:replace="~{common/template::library}"></th:block>
</head>
<body>
<div th:replace="~{common/template::headerRestaurant}"></div>

<div class="container py-4">
  <h2>๐ฆ Danh sรกch ฤฦกn hรng</h2>
  <table class="table table-bordered text-center align-middle">
    <thead class="table-light">
    <tr>
      <th>Mรฃ ฤฦกn</th>
      <th>Khรกch hรng</th>
      <th>SฤT</th> <!-- โ thรชm cแปt -->
      <th>Ngรy ฤแบทt</th>
      <th>Tแปng tiแปn</th>
      <th>Trแบกng thรกi</th>
      <th>Hรnh ฤแปng</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="order : ${orders}">
      <td th:text="${order.id}"></td>
      <td th:text="${order.user.fullname}"></td>

      <!-- โ Hiแปn thแป sแป ฤiแปn thoแบกi -->
      <td th:text="${order.user.phone != null ? order.user.phone : 'Chฦฐa cรณ'}"></td>

      <td th:text="${#temporals.format(order.createDate, 'dd/MM/yyyy HH:mm')}"></td>
      <td th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' ฤ'"></td>

      <!-- Trแบกng thรกi -->
      <td>
        <span th:classappend="${order.status == 2} ? 'badge bg-success' :
                              (${order.status == 1} ? 'badge bg-warning text-dark' :
                              (${order.status == 3} ? 'badge bg-danger' : 'badge bg-secondary'))"
              th:text="${order.statusText}"></span>
      </td>

      <!-- Hรnh ฤแปng -->
      <td>
        <div th:if="${order.status != 2 and order.status != 3}" class="d-flex gap-2 justify-content-center">
          <!-- Xรกc nhแบญn -->
          <form th:action="@{/restaurant/orders/{id}/next(id=${order.id})}" method="post"
                onsubmit="return confirm('Xรกc nhแบญn chuyแปn trแบกng thรกi ฤฦกn hรng nรy?');">
            <button type="submit" class="btn btn-success btn-sm">
              <span th:text="${order.status == 0 ? 'โ Xรกc nhแบญn' :
                              (order.status == 1 ? 'โ Hoรn thรnh' : 'โ Xรกc nhแบญn')}"></span>
            </button>
          </form>

          <!-- Hแปงy -->
          <form th:action="@{/restaurant/orders/{id}/cancel(id=${order.id})}" method="post"
                onsubmit="return confirm('Bแบกn cรณ chแบฏc muแปn hแปงy ฤฦกn hรng nรy khรดng?');">
            <button type="submit" class="btn btn-danger btn-sm">โ Hแปงy ฤฦกn</button>
          </form>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<div th:replace="~{common/template::footer}"></div>
</body>
</html>
